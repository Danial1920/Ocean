# Ocean Simulation

Этот проект представляет собой симуляцию экосистемы океана, реализованную на C++ с использованием современных парадигм программирования. Модель имитирует взаимодействие между различными организмами в океане: песчаными участками, водорослями, травоядными и хищными рыбами.

## Особенности проекта

- Объектно-ориентированный дизайн: Четкая иерархия классов для различных сущностей
- Современные идиомы C++:
  - Rule of Five для класса Ocean
  - Pimpl идиома для сокрытия реализации
  - RAII для управления ресурсами
- Управление памятью: Использование умных указателей (`std::unique_ptr`)
- Обработка ошибок: Комплексная обработка исключений
- Шаблонное программирование: Для подсчета сущностей
- Двухбуферная система: Для атомарного обновления состояния

## Сущности экосистемы

1. Песок (Sand):
   - Пустые участки океана
   - Служат местом для появления новых организмов

2. Водоросли (Algae):
   - Растут и размножаются в соседние пустые клетки
   - Имеют ограниченный срок жизни
   - Служат пищей для травоядных рыб

3. Травоядные рыбы (HerbivoreFish):
   - Питаются водорослями
   - Могут умереть от голода или старости
   - Размножаются при достижении определенного возраста
   - Перемещаются в поисках пищи

4. Хищные рыбы (PredatorFish):
   - Питаются травоядными рыбами
   - Имеют больший срок жизни, чем травоядные
   - Размножаются при достижении определенного возраста
   - Перемещаются в поисках добычи

## Требования к компиляции

- Компилятор с поддержкой C++17 (GCC 7+, Clang 5+ или MSVC 2017+)

### Прямая компиляция

g++ -std=c++17 -o OceanSimulation main.cpp
./OceanSimulation

## Архитектура проекта

### Основные классы

1. `Entity` (Базовый класс):
   - Интерфейс для всех сущностей в океане
   - Виртуальные методы: getType(), clone(), tick()

2. Производные классы:
   - Sand: Пустые участки
   - Algae: Водоросли
   - HerbivoreFish: Травоядные рыбы
   - PredatorFish: Хищные рыбы

3. `Ocean` (Класс океана):
   - Реализует двумерную сетку для размещения сущностей
   - Использует Pimpl идиому для сокрытия реализации
   - Реализует Rule of Five для корректного управления ресурсами
   - Обеспечивает методы для обновления состояния (`tick()`)
   - Предоставляет функционал для подсчета сущностей

4. Интерфейсы:
   - IOcean: Интерфейс только для чтения
   - IWritableOcean: Интерфейс для изменения состояния

### Ключевые алгоритмы

1. Цикл обновления:
   - Создается временный буфер для нового состояния
   - Каждая сущность обновляется и определяет свое поведение
   - Новое состояние атомарно заменяет текущее

2. Поведение сущностей:
   - Водоросли: Размножение в соседние пустые клетки
   - Рыбы: 
     - Поиск пищи в соседних клетках
     - Случайное перемещение при отсутствии пищи
     - Размножение при достижении определенного возраста

3. Инициализация:
   - Случайное заполнение океана сущностями

## Пример вывода

Программа выводит статистику по количеству сущностей после каждого тика:

Tick 1:
  Algae: 500
  HerbivoreFish: 50
  PredatorFish: 10

Tick 2:
  Algae: 523
  HerbivoreFish: 52
  PredatorFish: 10

...

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.
